<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang="">
<head>
  <meta charset="utf-8" />
  <meta name="generator" content="pandoc" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
  <title>Darius J Chuck – Format</title>
  <style>
      code{white-space: pre-wrap;}
      span.smallcaps{font-variant: small-caps;}
      span.underline{text-decoration: underline;}
      div.column{display: inline-block; vertical-align: top; width: 50%;}
  </style>
  <style>
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
  </style>
  <link rel="stylesheet" href="main.css" />
  <!--[if lt IE 9]>
    <script src="//cdnjs.cloudflare.com/ajax/libs/html5shiv/3.7.3/html5shiv-printshiv.min.js"></script>
  <![endif]-->
</head>
<body>
<div class="document narrow">
<h1>
    <a href="index.html" title="Click here to go to the home page">
        Darius J Chuck
    </a>
</h1>
<div class="avatar-container">
<img src="gfx/blogo-2-64.png" class="avatar" />
</div>
<header id="title-block-header">
<h1 class="title">Darius J Chuck – Format</h1>
</header>
<style>
body {
    margin: 0;
}
ol li {
    list-style-type: unset;
    text-indent: unset;
}
.title {
    display: none;
}
.footnotes {
    margin-bottom: 100vh;
}
.characters {
    color: #664400;
    background-color: #eeddaa;
}
.key {
    color: darkblue;
    background-color: lightblue;
}
.splice {
    background-color: #ddddaa;
    color: #994400;
}
.format {
    background-color: #eeeeee;
}
</style>
<p><a name="top"></a></p>
<h1 id="specification-draft-for-a-simple-data-interchange-format">Specification draft for a simple data interchange format<a href="#fn1" class="footnote-ref" id="fnref1" role="doc-noteref"><sup>1</sup></a></h1>
<p><em>Published close to 02.02.2020 02:02:20.20 CET.</em></p>
<p>This specification introduces an <a href="https://www.martinfowler.com/bliki/TwoHardThings.html">anonymous</a> simple data interchange <em>Format</em><a href="#fn2" class="footnote-ref" id="fnref2" role="doc-noteref"><sup>2</sup></a>, with potential advantages over <a href="https://www.json.org/json-en.html">JSON</a>, <a href="https://yaml.org/">YAML</a>, <a href="https://www.w3.org/TR/REC-xml/">XML</a>, <a href="https://en.wikipedia.org/wiki/S-expression">S-expressions</a>, <a href="toml">TOML</a>, <a href="https://github.com/lightbend/config/blob/master/HOCON.md">HOCON</a>, and others.</p>
<p>In describing the Format, JSON will be used as a reference. Reading the description at <a href="https://www.json.org/json-en.html">JSON.org</a> is advised.</p>
<p>The Format is <em>very</em> simple. It is essentially text in which paired <em>Brackets</em> (<code>[</code> and <code>]</code>) define structural relationships (i.e. nesting). On top of that there is a generalized Escape mechanism which allows encoding Brackets as part of text as well as mixing in more sophisticated grammars.</p>
<p>The simplicity and the very small number of building blocks or syntactical elements make the Format easier to read and write than any other format, both for humans and machines. The Format is completely programming language-independent and it is trivial to write a parser for it.</p>
<p>There exists only one structural element (the Pair) on top of which others (e.g. conventional <em>dictionaries</em> or <em>lists</em>) can be built without the need for separate syntax (as for <em>objects</em> and <em>arrays</em> in JSON).</p>
<p>Opposite to that there is only one non-structural element (the Fragment) on top of which others can be defined (<em>strings</em>, <em>numbers</em>, <em>booleans</em>, …).</p>
<p>You may want to <a href="#encoding">look at some examples</a> before proceeding.</p>
<h2 id="the-grammar">The Grammar</h2>
<p>The <em>Grammar</em> is (notation borrowed from JSON.org):</p>
<pre>
<a name="Document"></a><em>Document</em>
    Fragments
    Pairs

<a name="Fragments"></a><em>Fragments</em>
    Fragment
    Fragment Fragments

<a name="Fragment"></a><em>Fragment</em>
    Escape
    Characters

<a name="Escape"></a><em>Escape</em>
    Begin Splice Escaped

<a name="Pairs"></a><em>Pairs</em>
    Pair
    Pair Pairs

<a name="Pair"></a><em>Pair</em>
    Fragments Begin Document End

<a name="Begin"></a><em>Begin</em>
    '['

<a name="End"></a><em>End</em>
    ']'

<a name="Splice"></a><em>Splice</em>
    '\'

<a name="Block"></a><em>Block</em>
    '>'

<a name="Characters"></a><em>Characters</em>
    <span style="color: gray">Possibly empty sequence of characters excluding Brackets<!-- todo: ^[Which may be represented by the following [regular expression](https://en.wikipedia.org/wiki/Regular_expression): `/[^\[\]]*/`.]-->.</span>

<a name="Characters"></a><em>Whitespace</em>
    <span style="color: gray">Same as JSON's whitespace.</span>

<a name="Escaped"></a><em>Escaped</em>
    <span style="color: gray">See <a href="#the-escape-mechanism">The Escape mechanism<a>.</span>
</pre>
<h2 id="the-escape-mechanism">The Escape mechanism<a href="#fn3" class="footnote-ref" id="fnref3" role="doc-noteref"><sup>3</sup></a></h2>
<!-- todo: stabilize -->
<p>The Grammar goes together with the very general and expressive <em>Escape</em> mechanism which, among other things, allows encoding Brackets as non-significant characters in Fragments.</p>
<p>An Escape sequence starts with Begin followed by Splice. The extent and meaning of the rest of the Escaped portion that follows varies depending on how it starts. Below is an incomplete semi-formal description of this:</p>
<div>
<p>if Escaped portion starts with: (<code>Begin</code> | <code>End</code> | <code>Splice</code>)<sub><code>Character</code></sub><br/> then sequence terminates at: <code>Character</code><br/> and Resolves to: <code>Character</code><br/> <strong>example</strong>: <code>[\[</code> Resolves to <code>[</code><br/></p>
<p>else if Escaped portion starts with: <code>Whitespace</code> <code>Characters</code> <code>End</code><sub><code>Terminator</code></sub><br/> then sequence terminates at: <code>Terminator</code><br/> and Resolves to: portion between Splice and <code>Terminator</code><a href="#fn4" class="footnote-ref" id="fnref4" role="doc-noteref"><sup>4</sup></a><br/> <strong>example</strong>: <code>[\ text ]</code> Resolves to <code style="background-color: lightgray; white-space: pre;"> text </code><br/></p>
<p>else if Escaped portion starts with: <code>Block</code> <code>Fragments</code><sub><code>Terminator</code></sub> <code>End</code> <code>Line</code><sub><code>A</code></sub><br/> then sequence terminates at: first occurrence of <code>Line</code><sub><code>B</code></sub> <code>Terminator</code><sup><code>Resolved</code></sup><br/> and Resolves to: portion between <code>Line</code><sub><code>A</code></sub> and <code>Line</code><sub><code>B</code></sub><br/> <strong>example</strong>: See <a href="#heredoc-example">Heredoc Example</a><br/></p>
<p>else if Escaped portion starts with: <code>Fragments</code><sub><code>Terminator</code></sub> <code>End</code><br/> then sequence terminates at: first occurrence of <code>Terminator</code><sup><code>Resolved</code></sup><br/> and Resolves to: portion between <code>End</code> and <code>Terminator</code><sup><code>Resolved</code></sup><br/> <strong>example</strong>: <code>[\EOT]textEOT</code> Resolves to <code>text</code><br/></p>
</div>
<p>The general idea is that a Splice may be followed by a definition of a new grammar which supersedes the previous grammar. The definition should specify the grammar’s <em>Terminator</em> which, when encountered, restores the previous grammar.</p>
<h3 id="heredoc-example">Heredoc Example</h3>
<p>The following Escape sequence:</p>
<pre><code>[\&gt;EOT]
text
EOT</code></pre>
<p>Resolves to:</p>
<pre><code>text</code></pre>
<p>This functions similarly to the mechanism of <a href="https://en.wikipedia.org/wiki/Here_document">here documents</a> available in some programming languages and formats. <!-- todo: which --></p>
<h3 id="resolution">Resolution</h3>
<p>A Document encoded in the Format before further processing should undergo the process of <em>Resolving</em> which will transform all Escapes to their <em>Resolved</em> forms (as defined above) and join them together with adjacent Fragments into Resolved Fragments. <!-- todo: elaborate --></p>
<p><a name="encoding"></a></p>
<h2 id="encoding-structural-elements">Encoding structural elements</h2>
<p>A <em>List</em> of values may be encoded as a sequence of Pairs where the Fragments are empty or consist entirely of Whitespace:</p>
<pre class="format">
[<span class="characters">parsley</span>][<span class="characters">sage</span>][<span class="characters">rosemary</span>][<span class="characters">thyme</span>]
</pre>
<p>or equivalent:</p>
<pre class="format">
[<span class="characters">parsley</span>]
[<span class="characters">sage</span>]
[<span class="characters">rosemary</span>]
[<span class="characters">thyme</span>]
</pre>
<p>This would be equivalent to the following JSON <em>array</em>:</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode json"><code class="sourceCode json"><span id="cb3-1"><a href="#cb3-1"></a><span class="ot">[</span><span class="st">&quot;parsley&quot;</span><span class="ot">,</span> <span class="st">&quot;sage&quot;</span><span class="ot">,</span> <span class="st">&quot;rosemary&quot;</span><span class="ot">,</span> <span class="st">&quot;thyme&quot;</span><span class="ot">]</span></span></code></pre></div>
<p>A <em>Dictionary</em> may be encoded as a sequence of Pairs where Fragments are non-empty and non-Whitespace:</p>
<pre class="format">
<span class="key">Name</span> [<span class="characters">Parsley, Sage, Rosemary and Thyme</span>]
<span class="key">Artist</span> [<span class="characters">Simon & Garfunkel</span>]
<span class="key">Release date</span> [<span class="characters">October 10, 1966</span>]
<span class="key">Label</span> [<span class="characters">Columbia</span>]
</pre>
<p>Equivalent JSON <em>object</em>:</p>
<div class="sourceCode" id="cb4"><pre class="sourceCode json"><code class="sourceCode json"><span id="cb4-1"><a href="#cb4-1"></a><span class="fu">{</span></span>
<span id="cb4-2"><a href="#cb4-2"></a>    <span class="dt">&quot;Name&quot;</span><span class="fu">:</span> <span class="st">&quot;Parsley, Sage, Rosemary and Thyme&quot;</span><span class="fu">,</span></span>
<span id="cb4-3"><a href="#cb4-3"></a>    <span class="dt">&quot;Artist&quot;</span><span class="fu">:</span> <span class="st">&quot;Simon &amp; Garfunkel&quot;</span><span class="fu">,</span></span>
<span id="cb4-4"><a href="#cb4-4"></a>    <span class="dt">&quot;Release date&quot;</span><span class="fu">:</span> <span class="st">&quot;October 10, 1966&quot;</span><span class="fu">,</span></span>
<span id="cb4-5"><a href="#cb4-5"></a>    <span class="dt">&quot;Label&quot;</span><span class="fu">:</span> <span class="st">&quot;Columbia&quot;</span></span>
<span id="cb4-6"><a href="#cb4-6"></a><span class="fu">}</span></span></code></pre></div>
<p>Note that this encoding uses a convention where leading and trailing Whitespace is not part of the Dictionary’s keys. To have it included, it should be escaped:</p>
<pre class="format">
[<span class="splice">\</span><span class="key"> padded key </span>] [<span class="characters">value</span>]
</pre>
<p>Equivalent JSON:</p>
<div class="sourceCode" id="cb5"><pre class="sourceCode json"><code class="sourceCode json"><span id="cb5-1"><a href="#cb5-1"></a><span class="fu">{</span></span>
<span id="cb5-2"><a href="#cb5-2"></a>    <span class="dt">&quot; padded key &quot;</span><span class="fu">:</span> <span class="st">&quot;value&quot;</span></span>
<span id="cb5-3"><a href="#cb5-3"></a><span class="fu">}</span></span></code></pre></div>
<p>Structural elements may be nested freely:</p>
<pre class="format">
<span class="key">songs</span> [
    [
        <span class="key">title</span> [<span class="characters">Scarborough Fair / Canticle</span>]
        <span class="key">length</span> [<span class="characters">3:10</span>]
    ]
    [
        <span class="key">title</span> [<span class="characters">Patterns</span>]
        <span class="key">length</span> [<span class="characters">2:45</span>]
    ]
    [
        <span class="key">title</span> [<span class="characters">Cloudy</span>]
        <span class="key">length</span> [<span class="characters">2:15</span>]
    ]
]
</pre>
<p>Equivalent JSON:</p>
<div class="sourceCode" id="cb6"><pre class="sourceCode json"><code class="sourceCode json"><span id="cb6-1"><a href="#cb6-1"></a><span class="fu">{</span></span>
<span id="cb6-2"><a href="#cb6-2"></a>    <span class="dt">&quot;songs&quot;</span><span class="fu">:</span> <span class="ot">[</span></span>
<span id="cb6-3"><a href="#cb6-3"></a>        <span class="fu">{</span></span>
<span id="cb6-4"><a href="#cb6-4"></a>            <span class="dt">&quot;title&quot;</span><span class="fu">:</span> <span class="st">&quot;Scarborough Fair / Canticle&quot;</span><span class="fu">,</span></span>
<span id="cb6-5"><a href="#cb6-5"></a>            <span class="dt">&quot;length&quot;</span><span class="fu">:</span> <span class="st">&quot;3:10&quot;</span></span>
<span id="cb6-6"><a href="#cb6-6"></a>        <span class="fu">}</span><span class="ot">,</span></span>
<span id="cb6-7"><a href="#cb6-7"></a>        <span class="fu">{</span></span>
<span id="cb6-8"><a href="#cb6-8"></a>            <span class="dt">&quot;title&quot;</span><span class="fu">:</span> <span class="st">&quot;Patterns&quot;</span><span class="fu">,</span></span>
<span id="cb6-9"><a href="#cb6-9"></a>            <span class="dt">&quot;length&quot;</span><span class="fu">:</span> <span class="st">&quot;2:45&quot;</span></span>
<span id="cb6-10"><a href="#cb6-10"></a>        <span class="fu">}</span><span class="ot">,</span></span>
<span id="cb6-11"><a href="#cb6-11"></a>        <span class="fu">{</span></span>
<span id="cb6-12"><a href="#cb6-12"></a>            <span class="dt">&quot;title&quot;</span><span class="fu">:</span> <span class="st">&quot;Cloudy&quot;</span><span class="fu">,</span></span>
<span id="cb6-13"><a href="#cb6-13"></a>            <span class="dt">&quot;length&quot;</span><span class="fu">:</span> <span class="st">&quot;2:15&quot;</span></span>
<span id="cb6-14"><a href="#cb6-14"></a>        <span class="fu">}</span></span>
<span id="cb6-15"><a href="#cb6-15"></a>    <span class="ot">]</span></span>
<span id="cb6-16"><a href="#cb6-16"></a><span class="fu">}</span></span></code></pre></div>
<hr />
<p><em>Last updated 2020-02-02 at 03:00 CET.</em></p>
<p><a href="#top">Back to top</a>.</p>
<section class="footnotes" role="doc-endnotes">
<hr />
<ol>
<li id="fn1" role="doc-endnote"><p>Note: this is not finished or properly formalized but captures the essential idea and should suffice for preliminary assessment and implementation.<a href="#fnref1" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn2" role="doc-endnote"><p>In this document a word that is Capitalized and <em>italicized</em> introduces a definition. References to this definition are capitalized but not italicized.<a href="#fnref2" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn3" role="doc-endnote"><p>Note: This part of the specification is incomplete and unstable.<a href="#fnref3" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn4" role="doc-endnote"><p>Portion <em>between</em> X and Y means that X and Y are themselves not included.<a href="#fnref4" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
</ol>
</section>
</div>
</body>
</html>
